# Remote Development Environment Setup Tutorial

This tutorial will guide you through setting up a remote development environment, where you will securely connect to a remote host from your local machine. Follow these steps to configure both the host and your local environment.

This tutorial was inspired by [this page of the VS Code Documentation](https://code.visualstudio.com/docs/remote/troubleshooting).

---

### **1. Setup the Host** - *done by the host Administrator, you can skip this*

To allow your local machine to connect to the host, you need to create a new user on the remote host and set a password for them. 

Before proceeding, ensure the SSH server is installed on the host machine (typically `openssh-server` on Linux). You'll also need to temporarily adjust some SSH configuration settings to allow the key transfer. 

1. **Install SSH Server**: If not already installed, install the SSH server (for example, on Ubuntu, run `sudo apt install openssh-server`).

2. **Configure SSH Settings**:
   - Temporarily change the `PasswordAuthentication` variable to `yes` and `ChallengeResponseAuthentication` to `no` in `/etc/ssh/sshd_config`. This step is necessary for the initial key transfer.
   - After completing the key transfer, you should revert these changes to enhance security.

3. **Add a new user and set a password** on the remote host:

    ```bash
    sudo useradd -s /bin/bash -m username
    sudo passwd username
    ```

   Replace `username` with the username you wish to create on the host.

---

### **2. Test the Connection** - *You can start here*

Before proceeding with the SSH key setup, you should verify that your local machine can reach the remote host. Try pinging the host to check the connection:

```bash
ping hostname
```

If the ping fails, check the following:
- Ensure your local machine and the host are on the same network or VPN (if applicable).
- Verify the host's firewall settings and ensure that port 22 (SSH) is open.
- Make sure the host machine is powered on and properly connected to the network.

---

### **3. Setup the Local Machine**

Now, let's generate an SSH key pair on your local machine. This will allow secure authentication without the need for a password.

**Note**: If you're on Windows with WSL (Windows Subsystem for Linux), the commands below need to be run in the native PowerShell, **not inside the WSL terminal**!

#### **Linux/macOS:**

On Linux or macOS, use the following command to generate the SSH key:

```bash
ssh-keygen -t ed25519 -b 4096
```

When prompted, you can either accept the default location for the key (`~/.ssh/id_ed25519`) or provide a custom path.

#### **Windows (using PowerShell):**

For Windows, you can also generate the SSH key pair using PowerShell. Open a PowerShell window and run:

```bash
ssh-keygen -t ed25519 -b 4096
```

This will create the SSH key pair in the default directory, which you can later configure for use.

---

### **4. Granting SSH Key Access on the Host**

Once the key pair is created, you need to add your public key to the remote host's `~/.ssh/authorized_keys` file to allow passwordless SSH login.

#### **For Linux/macOS:**

1. Set proper permissions on your private key:

    ```bash
    chmod 400 ~/.ssh/id_ed25519
    ```

2. Use `ssh-copy-id` to automatically copy the public key to the remote host's `authorized_keys` file:

    ```bash
    export USER_AT_HOST="your-user-name-on-host@hostname"
    export PUBKEYPATH="$HOME/.ssh/id_ed25519.pub"
    ssh-copy-id -i "$PUBKEYPATH" "$USER_AT_HOST"
    ```

    Make sure to replace `your-user-name-on-host` and `hostname` with the appropriate values!

#### **For Windows (using PowerShell):**

1. Use `icacls` to grant read permissions to your private key:

    ```bash
    icacls "privateKeyPath" /grant <username>:R
    ```

    Replace `privateKeyPath` with the actual path to your private key, and `<username>` with your Windows username.

2. Set up the SSH connection by appending the public key to the remote user's `authorized_keys` file:

    ```bash
    $USER_AT_HOST="your-user-name-on-host@hostname"
    $PUBKEYPATH="$HOME\.ssh\id_ed25519.pub"
    $pubKey=(Get-Content "$PUBKEYPATH" | Out-String); ssh "$USER_AT_HOST" "mkdir -p ~/.ssh && chmod 700 ~/.ssh && echo '${pubKey}' >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
    ```

    Make sure to replace `your-user-name-on-host` with the correct username and `hostname` with the host's address!

---

### **5. SSH Configuration**

To simplify your SSH login process, you can configure your SSH settings by adding an entry to the `~/.ssh/config` file on your local machine. This step is optional, but it will make it easier to connect to your remote host in the future.

**Warning:**

- If the `~/.ssh/config` file doesn't already exist, you will need to create it manually.

- Windows users should be aware that Windows sometimes masks file extensions by default. This means that a file named `config.txt` might appear as `config` without the `.txt` extension. If you're on Windows, make sure the file is saved without any extension (i.e., just `config`).

In the file `$HOME/.ssh/config`, add the following configuration:

```
Host host-nickname
    HostName hostname
    User your-user-name-on-host
    IdentityFile ~/.ssh/id_ed25519
```

- Replace `host-nickname` with a name you choose for your host (e.g., `my-remote-server`).
- Replace `hostname` with the actual hostname or IP address of the remote server.
- Replace `your-user-name-on-host` with the username you created on the host.

Once this configuration is added, you can SSH into the host using the alias you defined. For example:

```bash
ssh host-nickname
```

---

### **6. Conclusion**

After completing these steps, you will be able to securely connect to the remote host using SSH, making your remote development environment setup complete.

Feel free to test the connection by running the following command:

```bash
ssh host-nickname
```

If everything is configured correctly, you should be logged into the remote host without needing to enter a password.